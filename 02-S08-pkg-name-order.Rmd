## Compare download counts with alphabetical order of name

We might also have such experiences in our life. For example, when we go shopping in the supermarket, the goods placed in front of the shelves will be easier to attract our attention and be selected by us, because we may no longer want to seek products with similar functions for a long time.

From the perspective of package name, in addition to the length, does the alphabetical order of the first letter also affect the download volume? For packages with earlier alphabetical order will be placed at the first part of the package list on CRAN[@cranpkgsname]. To answer this question, we grouped the packages in 26-letter order, calculated the average downloads of each group, and then made comparison.

```{block, type="discovery", echo = TRUE}
**Finding 1**: For all packages, the average downloads of different alphabetical group are slightly increasing by its order, while the total download tends to decrease a little, instead.
```

```{r alphabetic-group}
library(available)
cran_names <- rownames(available:::available_packages(repos = available:::default_cran_repos)) %>%
  as.data.frame() 

colnames(cran_names)[1] <- "package"


  get_pkg_alphabetic <- function(df,letter1,letter2){
  
  pkg <- df %>%
  filter(str_detect(package, paste0(letter1)))%>%
  mutate(group = paste0(letter2))

  return(pkg)
  
  }

#group the pkgs by alphabetical order
pkg_a <- get_pkg_alphabetic(cran_names,"^a|^A","A/a")
pkg_b <- get_pkg_alphabetic(cran_names,"^b|^B","B/b")
pkg_c <- get_pkg_alphabetic(cran_names,"^c|^C","C/c")
pkg_d <- get_pkg_alphabetic(cran_names,"^d|^D","D/d")
pkg_e <- get_pkg_alphabetic(cran_names,"^e|^E","E/e")
pkg_f <- get_pkg_alphabetic(cran_names,"^f|^F","F/f")
pkg_g <- get_pkg_alphabetic(cran_names,"^g|^G","G/g")
pkg_h <- get_pkg_alphabetic(cran_names,"^h|^H","H/h")
pkg_i <- get_pkg_alphabetic(cran_names,"^i|^I","I/i")
pkg_j <- get_pkg_alphabetic(cran_names,"^j|^J","J/j")
pkg_k <- get_pkg_alphabetic(cran_names,"^k|^K","K/k")
pkg_l <- get_pkg_alphabetic(cran_names,"^l|^L","L/l")
pkg_m <- get_pkg_alphabetic(cran_names,"^m|^M","M/m")
pkg_n <- get_pkg_alphabetic(cran_names,"^n|^N","N/n")
pkg_o <- get_pkg_alphabetic(cran_names,"^o|^O","O/o")
pkg_p <- get_pkg_alphabetic(cran_names,"^p|^P","P/p")
pkg_q <- get_pkg_alphabetic(cran_names,"^q|^Q","Q/q")
pkg_r <- get_pkg_alphabetic(cran_names,"^r|^R","R/r")
pkg_s <- get_pkg_alphabetic(cran_names,"^s|^S","S/s")
pkg_t <- get_pkg_alphabetic(cran_names,"^t|^T","T/t")
pkg_u <- get_pkg_alphabetic(cran_names,"^u|^U","U/u")
pkg_v <- get_pkg_alphabetic(cran_names,"^v|^V","V/v")
pkg_w <- get_pkg_alphabetic(cran_names,"^w|^W","W/w")
pkg_x <- get_pkg_alphabetic(cran_names,"^x|^X","X/x")
pkg_y <- get_pkg_alphabetic(cran_names,"^y|^Y","Y/y")
pkg_z <- get_pkg_alphabetic(cran_names,"^z|^Z","Z/z")

pkg_alphabetic <- rbind(pkg_a,pkg_b,pkg_c,pkg_d,pkg_e,pkg_f,pkg_g,pkg_h,pkg_i,pkg_j,pkg_k,pkg_l,pkg_m,pkg_n,pkg_o,pkg_p,pkg_q,pkg_r,pkg_s,pkg_t,pkg_u,pkg_v,pkg_w,pkg_x,pkg_y,pkg_z) %>%
  group_by(group)

```


```{r  alpha-avg-download}
pkg_alpha_download <- pkg_alphabetic%>%
  left_join(cran_names_download,by = "package") %>%
  na.omit()

alphabetic_downloads <- pkg_alpha_download %>%
  group_by(group) %>%
  summarise(avg_downloads = mean(total),
            total_downloads = sum(total))
```

From Figure \@ref(fig:ahlpha-downloads) we could see that the average downloads of different alphabetic group are slightly increasing by alphabetic order, while the total downloads tends to decrease a little, instead. This is because the later-ordered group contains fewer packages. It can be seen that developers may prefer to name their packages with a top alphabetical order, which might be easier for users to notice.

(ref:ahlpha-downloads) The average total download count of each group is little affected by the alphabetical order of package name.

```{r ahlpha-downloads,fig.cap="(ref:ahlpha-downloads)"}

alphabetic_downloads %>%
  ggplot() +
  geom_point(aes(x = group,y = avg_downloads,colour = "mean download")) +
  geom_point(aes(x = group,y = total_downloads,colour = "total download")) +
  labs( y = 'Total download counts',
    title = "Download counts against different alphabetical group",
    subtitle = "for 1000 random packages") +
  scale_y_log10() +
  theme_minimal()  +
  theme(panel.grid.major = element_blank()) +
  theme(
  axis.text=element_text(size=10),
  axis.title=element_text(size=12,face="bold"),
  plot.title = element_text(h = 0.5),
  plot.subtitle = element_text(h = 0.5),
  axis.title.x = element_blank())
```

```{block, type="discovery", echo = TRUE}
**Finding 2**: For all packages on CRAN, the group with higher total download tends to have greater variance, owing to more outliers.
```

Then, let's take a look for how the variance varies across groups. Figure \@ref(fig:random-boxplot) shows the data range and the median value for each alphabetical group. It can be seen that the group "R/r" has the highest outlier and the group "X/x" has the largest variation. At the same time, we could also see that the variance between different groups is not very obvious, which means that for each group, 50% of the package download count is relatively concentrated. The real difference is the highest and lowest downloads per group. In general, the larger the total number of downloads (which also means the more packages in the group), the more outliers will be included, such as group "F/f", "L/l" and "R/r".

(ref:all-boxplot) The packages with name starting with "j" has the largest variation.

```{r all-boxplot,fig.cap="(ref:all-boxplot)"}

ggplot(pkg_alpha_download,aes(x = group, y = total)) +
  geom_boxplot() +
  labs( y = 'Total download counts',
    title = "Total download counts against different alphabetic group",
    subtitle = "for all packages of each group") +
  scale_y_log10() +
  #ylim(0, 10000) +
  theme_minimal()  +
  theme(panel.grid.major = element_blank()) +
  theme(
  axis.text=element_text(size=10),
  axis.title=element_text(size=12,face="bold"),
  plot.title = element_text(h = 0.5),
  plot.subtitle = element_text(h = 0.5),
  axis.title.x = element_blank())
```

In order to further verify our conclusion, we turned to the ultra-low-downloaded packages. As we have mentioned previously, when it comes to the ultra-low-downloaded packages, we could assume the only variable that affects the amount of downloads is name order here.
From Figure \@ref(fig:lowdownload-boxplot), we could see that the difference in median download count of each alphabetical group is not significant as we expected.

```{r lowdownload-boxplot,fig.cap="(ref:random-boxplot)"}
pkg_alpha_low <- pkg_alpha_download %>%
   filter(total < 401)

ggplot(pkg_alpha_low,aes(x = group, y = total)) +
  geom_violin() +
  geom_boxplot(width = 0.1)+
  labs( y = 'Total download counts',
    title = "Total download counts against different alphabetic group",
    subtitle = "for last 1% downloaded packages of each group") +
  scale_y_log10() +
  #ylim(0, 10000) +
  theme_minimal()  +
  theme(panel.grid.major = element_blank()) +
  theme(
  axis.text=element_text(size=10),
  axis.title=element_text(size=12,face="bold"),
  plot.title = element_text(h = 0.5),
  plot.subtitle = element_text(h = 0.5),
  axis.title.x = element_blank())
  
```

Therefore, we could approximately draw a conclusion : In general, the packages with the top alphabetical order are easier to get relatively high download volume, but the gap is not significant. At the same time, the higher the number of downloads, the greater the variance will appears in this group.
