## Compare the package name length with download counts

Here, we still focused on all packages on CRAN and made comparison between the name length with the last half a year's total downloads.

```{block, type="discovery", echo = TRUE}
**Finding 1**: The name length of packages has no significant effect on the number of downloads.
```

```{r  namelength1}
cran_namelth_download <- cran_names_download %>%
  mutate(length_name = nchar(package)) %>%
  rowwise()%>%
  mutate(length_name = as.numeric(length_name)) 


cran_namelth_download <- cran_namelth_download %>%
  arrange(desc(total)) 
```

We could see from Figure \@ref(fig:namelength-plot) that, in general, the influence of name length on download volume is not very obvious. But we could still observe that the number of downloads decreases slightly with the length of the name. And the names with more than 6,000,000 downloads are between 5 and 9 characters long. Alao, the most downloaded is package `r cran_namelth_download$package[1]` whose name length is `r cran_namelth_download$length_name[1]`, with `r cran_namelth_download$total[1]` download counts.

(ref:namelength-plot) The names of packages with more than 6,000,000 downloads are between 5 and 9 characters long. 

```{r  namelength-plot,fig.cap="(ref:namelength-plot)"}
cran_namelth_download %>%
  group_by(length_name) %>%
  ggplot(aes(x = length_name, y = total)) +
  geom_point()+
  geom_smooth(se = F) +
  scale_y_sqrt() +
  scale_x_log10() +
  labs( y = 'Total download counts',
        x = 'The length of package names',
    title = "Name length against the download counts",
    subtitle = "for all packages on CRAN") +
  #theme_minimal()  +
  theme(panel.grid.major = element_blank()) +
  theme(
  axis.text=element_text(size=10),
  axis.title=element_text(size=12,face="bold"),
  plot.title = element_text(h = 0.5),
  plot.subtitle = element_text(h = 0.5))


```


```{r namelength}
`total average name length`  <- as.numeric(mean(cran_namelth_download$length_name))
`pkg_trending_total` <- as.numeric(length(cran_namelth_download$package))

cran_namelth_download1 <- cran_namelth_download %>%
  group_by(package) %>%
  dplyr::filter(length_name < `total average name length`) %>%
  ungroup() %>%
  dplyr::summarise(`number of short names` = length(package)) %>%
  mutate(`percentage of short names` = (`number of short names`/pkg_trending_total)*100)

compare_all_namelth <- cbind(cran_namelth_download1,`total average name length`)

```

```{block, type="discovery", echo = TRUE}
**Finding 2**: The average name length of packages is about 7.8 characters, and over half of the packages tend to have shorter names, which may make it more easier to be remembered by users.
```

Table \@ref(tab:pct-lngname) shows that the average name length all packages is `r compare_all_namelth[[3]]`. And over half of the packages are more likely to have names shorter than average. That means, to a certain extent, packages with shorter names are easier to get relatively higher downloads. And that may because shorter named packages are easier for users to remember.

```{r pct-lngname}
library(kableExtra)
compare_all_namelth %>%
  kable(caption = "Percentage of packages whose name length are less than average") %>%
  kable_styling(bootstrap_options = c("hover", "striped"))
```

```{block, type="discovery", echo = TRUE}
**Finding 3**: The 95% confidence interval of the name length is between 7.80 and 7.90 characters.
```

```{r compute-ci}
# to get the 95% CI of the name length

# calculate the mean, sd and se
sample.mean <- mean(cran_namelth_download$length_name)
sample.n <- length(cran_namelth_download$length_name)
sample.sd <- sd(cran_namelth_download$length_name)
sample.se <- sample.sd/sqrt(sample.n)

# find t-score
alpha <- 0.05
degrees.freedom <- sample.n - 1
t.score <- qt(p=alpha/2, df=degrees.freedom,lower.tail=F)

margin.error <- t.score * sample.se

# get the 95% CI
lower.bound <- sample.mean - margin.error
upper.bound <- sample.mean + margin.error

namelth_CI <- cbind(lower.bound,upper.bound)

```

Table \@ref(tab:pct-lngname) shows the 95% confidence interval of name length for all packages. We could know that the 95% suitable name length is between `r namelth_CI[[1]]` and `r namelth_CI[[2]]` characters.

```{r namelth-ci}
namelth_CI %>%
  kable(caption = "95% Confidence Interval of name length for random packages") %>%
  kable_styling(bootstrap_options = c("hover", "striped"))
```

After we found that there is no obvious relationship between the name length of the package and the download volume, a new question came up : Is the name length of the package affected by the time of initial release date?

```{block, type="discovery", echo = TRUE}
**Finding 4**: For taskview packages, the length of the package name increases with the initial release date, especially for Bayesian packages.
```

We have such an experience in life, that is, for the same type of goods, such as detective novels, the later they are released, the narrower the choice of naming is, because there are certain restrictions on the name of a particular type, but many names have been occupied by the books published earlier. Therefore, these later published books often have to lengthen their names to distinguish themselves from the existing books in the same type or even the same name. 
Coincidentally, we assumed the naming of packages from the same type would also be affected by the initial release time, to a certain extent. So, here, we looked back to the CRAN task view packages for constructing comparison among packages from the same topic. Figure \@ref(fig:namelth-taskview) shows the name length of CRAN task view packages against the initial release date. It is obvious that the length of the package name increases with the initial release date, especially for Bayesian packages.

(ref:namelth-taskview) The name length of taskview packages slightly increase with the initial release date.

```{r namelth-taskview,fig.height = 10,fig.cap="(ref:namelth-taskview)"}
taskview_downloads %>% 
  group_by(package) %>% 
  summarise(total = sum(count), 
            taskview = unique(taskview)) %>% 
  left_join(initial_release, by = "package") %>%
  mutate(length_name = nchar(package))%>%
  ggplot(aes(x = initial, y = length_name)) +
  geom_point(colour = "grey")+
  geom_smooth(aes(colour = taskview),se = F) +
  facet_wrap(~taskview, ncol = 1) +
  scale_y_log10() +
  labs( y = 'Name length',
        x = 'The initial release date',
    title = "Name length against the initail release date",
    subtitle = "for three types of packages from CRAN task view") +
  #theme_minimal()  +
  theme(panel.grid.major = element_blank()) +
  theme(
  axis.text=element_text(size=10),
  axis.title=element_text(size=12,face="bold"),
  plot.title = element_text(h = 0.5),
  plot.subtitle = element_text(h = 0.5))
```


```{block, type="discovery", echo = TRUE}
**Finding 5**: For all packages on CRAN, the average name length tends to generally increase with the inital release date.
```

Although we'd better explore this question among the same topic of packages, we could also have a view on the annual change in the average name length of all packages on CRAN.

Figure \@ref(fig:avgnamelth-year) shows the average name length of all packages on CRAN released in each year. It is obvious that the name length of these package generally increases year by year.

(ref:random-release) The average name length of all packages on CRAN each year tends to rise along the time.

```{r avgnamelth-year,fig.cap="(ref:avgnamelth-year)"}
pkg_namelth_release <- pkg_updates_all %>%
  mutate(releases = as.Date(release)) %>% 
  group_by(package) %>% 
  summarise(initial = min(releases)) %>% 
  ungroup()%>%
  mutate(length_name = nchar(package)) 

pkg_namelth_release %>%
  mutate(Year = year(initial)) %>%
  group_by(Year) %>%
  summarise(avg_namelth = mean(length_name)) %>%
  ggplot(aes(x = Year,y = avg_namelth)) +
  geom_point(colour = "grey")+
  geom_smooth(se = F) +
  labs( y = 'Average name length',
        x = 'The initial release date',
    title = "Average name length each year",
    subtitle = "for all packages on CRAN") +
  theme_minimal()  +
  theme(panel.grid.major = element_blank()) +
  theme(
  axis.text=element_text(size=10),
  axis.title=element_text(size=12,face="bold"),
  plot.title = element_text(h = 0.5),
  plot.subtitle = element_text(h = 0.5))
```

